# -*- coding: utf-8 -*-
"""PROYECTO_TURISMO.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1At62OgOTdxM-rYDl9IvVHUD89Pj5oP50
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from google.colab import files
import seaborn as sns
import statsmodels.api as sm

datos = pd.read_excel("/content/compendio.xlsx")   #dataFrame
datos.head()

# Solicito información general de la base de datos
datos.info()

# Estadísticas descriptivas de las tres variables cuantitativas
datos.describe()

# Calculo el promedio de los gastos del turismo
datos['gastos'].mean(), datos.gastos.mean(), np.mean(datos['gastos'])

# Calculo el promedio de los gastos del turismo
datos['ingresos'].mean(), datos.ingresos.mean(), np.mean(datos['ingresos'])

# Calculo el promedio de los gastos del turismo
datos['utiliad'].mean(), datos.utiliad.mean(), np.mean(datos['utiliad'])

# Calculo una variable secundaria a partir de variables originarias
#por cada ingreso en el pais cuanto se destina para cubrir el gasto? todo en materia de turismo
datos['cobertura'] = datos['ingresos']/datos['gastos']
datos.head()

datos

# @title utiliad vs entrada de personas

from matplotlib import pyplot as plt
datos.plot(kind='scatter', x='gastos', y='entrada de personas', s=32, alpha=.8)
plt.gca().spines[['top', 'right',]].set_visible(False)

# @title año vs utiliad

from matplotlib import pyplot as plt
import seaborn as sns
def _plot_series(series, series_name, series_index=0):
  palette = list(sns.palettes.mpl_palette('Dark2'))
  xs = series['año']
  ys = series['utiliad']

  plt.plot(xs, ys, label=series_name, color=palette[series_index % len(palette)])

fig, ax = plt.subplots(figsize=(10, 5.2), layout='constrained')
df_sorted = datos.sort_values('año', ascending=True)
_plot_series(df_sorted, '')
sns.despine(fig=fig, ax=ax)
plt.xlabel('año')
_ = plt.ylabel('utiliad')

# @title ingresos vs entradad e personas

from matplotlib import pyplot as plt
import seaborn as sns
def _plot_series(series, series_name, series_index=0):
  palette = list(sns.palettes.mpl_palette('Dark2'))
  xs = series['ingresos']
  ys = series['entrada de personas']

  plt.plot(xs, ys, label=series_name, color=palette[series_index % len(palette)])

fig, ax = plt.subplots(figsize=(10, 5.2), layout='constrained')
df_sorted = datos.sort_values('ingresos', ascending=True)
_plot_series(df_sorted, '')
sns.despine(fig=fig, ax=ax)
plt.xlabel('ingresos')
_ = plt.ylabel('entrada de personas')

# @title ingresos vs salida de personas

from matplotlib import pyplot as plt
import seaborn as sns
def _plot_series(series, series_name, series_index=0):
  palette = list(sns.palettes.mpl_palette('Dark2'))
  xs = series['ingresos']
  ys = series['salida de personas']

  plt.plot(xs, ys, label=series_name, color=palette[series_index % len(palette)])

fig, ax = plt.subplots(figsize=(10, 5.2), layout='constrained')
df_sorted = datos.sort_values('ingresos', ascending=True)
_plot_series(df_sorted, '')
sns.despine(fig=fig, ax=ax)
plt.xlabel('ingresos')
_ = plt.ylabel('salida de personas')

c1=datos['ingresos']
c2=datos['entrada de personas']
c3=datos['salida de personas']

# Preprocesado y modelado
# ==============================================================================
import statsmodels as sm
from statsmodels.api import add_constant
from statsmodels.api import OLS
from statsmodels.formula.api import ols
# Configuración warnings
# ==============================================================================
import warnings
warnings.filterwarnings('ignore')

# Analysis of Variance (ANOVA) on linear models
from statsmodels.stats.anova import anova_lm
import statsmodels.stats.anova as  smf

data = pd.DataFrame({'y': c1, 'x1': c2, 'x2': c3})

model = ols("y ~ x1 + x2", data).fit()

# Print the summary
print(model.summary())

print("\nRetrieving manually the parameter estimates:")
print(model._results.params)


plt.show()

corre= datos.corr()
corre

sns.heatmap(corre, cmap= "YlGn");

datos_empleos = pd.read_excel("/content/DATOS EMPLEADOS.xlsx")   #dataFrame
datos_empleos.head()

datos_empleos = datos_empleos[datos_empleos['NOMDEP'] != 'NO DETERMINADO']

# Solicito información general de la base de datos
datos_empleos.info()

# Estadísticas descriptivas de las tres variables cuantitativas
datos_empleos.describe()

depto = []
peso = []
DATOS_DEP= (datos_empleos['NOMDEP']).unique().tolist()
total = len(datos_empleos['NOMDEP'])

for i in DATOS_DEP:
    depto.append(i)
    a = (len(datos_empleos[datos_empleos['NOMDEP']== i]))/total
    peso.append(a)

nuevodf = pd.DataFrame()

nuevodf['DEPTO'] = depto
nuevodf['Peso'] = peso

nuevodf

from matplotlib import pyplot as plt
import seaborn as sns
def _plot_series(series, series_name, series_index=0):
  palette = list(sns.palettes.mpl_palette('Dark2'))
  xs = series['index']
  ys = series['Peso']

  plt.plot(xs, ys, label=series_name, color=palette[series_index % len(palette)])

fig, ax = plt.subplots(figsize=(10, 5.2), layout='constrained')
df_sorted = _df_23.sort_values('index', ascending=True)
_plot_series(df_sorted, '')
sns.despine(fig=fig, ax=ax)
plt.xlabel('index')
_ = plt.ylabel('Peso')

nuevodf[nuevodf['Peso'] >= 0.05]

list((nuevodf['DEPTO'])[nuevodf['Peso'] >= 0.05])

list((nuevodf['DEPTO'])[nuevodf['Peso'] < 0.05])

dic = {'BOGOTA':'BOGOTA', 'MAGDALENA':'MAGDALENA', 'ANTIOQUIA': 'ANTIOQUIA', 'BOLIVAR':'BOLIVAR' , 'VALLE DEL CAUCA':'VALLE DEL CAUCA', 'CUNDINAMARCA': 'CUNDINAMARCA', 'SANTANDER': 'SANTANDER', 'CHOCO': 'OTRO', 'SAN ANDRES Y PROVIDENCIA': 'OTRO' , 'NORTE DESANTANDER': 'OTRO','CAUCA': 'OTRO',  'META': 'OTRO','ATLANTICO': 'OTRO', 'RISARALDA': 'OTRO', 'LA GUAJIRA': 'OTRO', 'QUINDIO': 'OTRO', 'HUILA': 'OTRO', 'CESAR': 'OTRO', 'CALDAS': 'OTRO', 'NARIÑO': 'OTRO', 'BOYACA': 'OTRO', 'CHOCO': 'OTRO', 'TOLIMA': 'OTRO', 'AMAZONAS': 'OTRO', 'ARAUCA': 'OTRO', 'CORDOBA': 'OTRO', 'SUCRE': 'OTRO', 'GUAVIARE': 'OTRO', 'CAQUETA': 'OTRO', 'CASANARE': 'OTRO', 'VICHADA': 'OTRO', 'PUTUMAYO': 'OTRO',  'GUAINIA': 'OTRO', 'Cauca': 'OTRO',  'Guainia': 'OTRO', 'GUAJIRA': 'OTRO', 'VAUPES':'OTRO'}

datos_empleos['Categoria'] = (datos_empleos['NOMDEP']).map(dic)
datos_empleos.head()

import matplotlib.pyplot as plt

# Realizo un gráfico de torta
categoria, counts = np.unique(datos_empleos['Categoria'], return_counts=True)
categoria, counts
fig = plt.figure(figsize=(4,4))
_ = plt.pie(counts, labels=categoria, autopct='%.1f%%')
plt.title('Diagrama de torta Categoria')

fig = plt.figure(figsize=(15,4))
_ = plt.bar(categoria, counts)
plt.grid()
_ = plt.title('Diagrama de barras Categoria')

np.sum((datos_empleos['EMPLEADOS'])[datos_empleos['Categoria']== 'BOGOTA'])

np.sum((datos_empleos['EMPLEADOS'])[datos_empleos['Categoria']== 'ANTIOQUIA'])

np.sum((datos_empleos['EMPLEADOS'])[datos_empleos['Categoria']== 'BOLIVAR'])

np.sum((datos_empleos['EMPLEADOS'])[datos_empleos['Categoria']== 'CUNDINAMARCA'])

np.sum((datos_empleos['EMPLEADOS'])[datos_empleos['Categoria']== 'MAGDALENA'])

np.sum((datos_empleos['EMPLEADOS'])[datos_empleos['Categoria']== 'SANTANDER'])

np.sum((datos_empleos['EMPLEADOS'])[datos_empleos['Categoria']== 'VALLE DEL CAUCA'])

(datos_empleos.groupby( ['Categoria']).sum('EMPLEADOS'))

((datos_empleos[datos_empleos['Categoria'] != 'OTRO']).groupby( ['Categoria']).sum(['EMPLEADOS'])).plot.bar()

((datos_empleos[datos_empleos['Categoria'] != 'OTRO']).groupby( ['Categoria']).sum(['EMPLEADOS']))

# Realizo un gráfico de torta
imc_group, empleados_por_ciudad = np.unique((datos_empleos['Categoria'])[datos_empleos['Categoria'] != 'OTRO'], return_counts=True)
imc_group, empleados_por_ciudad
fig = plt.figure(figsize=(4,4))
_ = plt.pie(empleados_por_ciudad, labels=imc_group, autopct='%.1f%%')
plt.title('Diagrama de torta empleados')
